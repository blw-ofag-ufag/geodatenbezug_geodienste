name: GDAL

on:
    push:
    workflow_dispatch:
        inputs:
            gdal-version:
                description: "GDAL version"
                required: true
                default: "3.8.5"
            python-version:
                description: "Python version"
                required: true
                default: "3.11"

env:
    GDAL_VERSION: "3.8.5"
    PYTHON_VERSION: "3.11"

jobs:
    linux:
        runs-on: ubuntu-latest
        name: Build GDAL wheel for Linux
        steps:
            - name: Set up Python
              uses: actions/setup-python@v5
              with:
                  python-version: ${{ env.PYTHON_VERSION }}
            - name: Build GDAL wheel
              id: gdal
              uses: trundev/setup-gdal@main
              with:
                  gdal-version: "v${{ env.GDAL_VERSION }}"
                  rebuild-cache: "false"
                  base-dir: "GDAL~"
                  cache-key-prefix: ""
                  use-conda: "false"
            - name: Upload wheel
              uses: actions/upload-artifact@v4
              with:
                  name: linux-wheel
                  path: ${{steps.gdal.outputs.wheel-path}}
